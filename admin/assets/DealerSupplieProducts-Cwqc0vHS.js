import{a as T,b as q,c as S,r as h,t as H,j as e,L,v as J,w as Y,u as E,h as Z,x as ee,y as se,z as ae,q as ne,A as ie}from"./index-GDIqWgRK.js";/* empty css               */import{d as K}from"./building1-DVpLLq6B.js";import{D as le}from"./Drawer-BQdu0KjK.js";import{R as _}from"./react-paginate-DdB8dUHD.js";import{O as M}from"./OrdersComp-CG7Qv-5c.js";import{d as Q}from"./gallery_default-Dw_oZD7n.js";import{M as $}from"./Modal-BVs0t9z7.js";/* empty css                   */import z from"./DealerDetails-D2ufoOqd.js";import"./package-BBZZd5X7.js";const te=({product:c,onUpdateSuccess:g})=>{var N;const m=T(),j=q();new URLSearchParams(j.search).get("dealerId");const{productDetails:a,isLoading:v,error:l}=S(n=>n.approvals),{isLoading:b,error:d}=S(n=>n.approvals),[i,p]=h.useState({dealerId:"",productId:"",image:"",name:"",bio:"",metricUnit:"",price:0,discount:0,quantity:1,deliveryFee:0,packages:[],kmRangeCharges:[]});h.useEffect(()=>{c!=null&&c._id&&m(H({productId:c._id}))},[m,c==null?void 0:c._id]),h.useEffect(()=>{var n;a&&p({dealerId:(a==null?void 0:a.productDetails.dealerId)||"",productId:(a==null?void 0:a.productDetails._id)||"",image:(a==null?void 0:a.productDetails.image)||"",name:(a==null?void 0:a.productDetails.name)||"",bio:(a==null?void 0:a.productDetails.bio)||"",metricUnit:(a==null?void 0:a.productDetails.metricUnit)||"",price:(a==null?void 0:a.productDetails.price)||0,discount:(a==null?void 0:a.productDetails.discount)||0,quantity:(a==null?void 0:a.productDetails.quantity)||1,deliveryFee:(a==null?void 0:a.productDetails.deliveryFee)||0,packages:(a==null?void 0:a.productDetails.packages)||[],kmRangeCharges:((n=a==null?void 0:a.productDetails)==null?void 0:n.kmRangeCharges)||[]})},[a]);const s=n=>{const{name:x,value:o}=n.target;p({...i,[x]:o})},u=async n=>{n.preventDefault(),(await m(J(i))).meta.requestStatus==="fulfilled"&&g()},f=(n,x,o)=>{const r=[...i.packages];r[n]={...r[n],[x]:o},p({...i,packages:r})},P=async n=>{const x=n.target.files[0];if(!x)return;const o=new FormData;o.append("type","product"),o.append("file",x);const r=await m(Y(o));if(r.meta.requestStatus==="fulfilled"&&r.payload){const C=r.payload;p(D=>({...D,image:C}))}},y=(n,x,o)=>{const r=[...i.kmRangeCharges];r[n]={...r[n],[x]:o},p({...i,kmRangeCharges:r})};return e.jsxs("div",{className:"product-update-container",children:[e.jsx("h2",{className:"product-update-title",children:"Update Product"}),v&&e.jsx(L,{}),!v&&l&&e.jsx("div",{className:"errDiv",children:e.jsx("p",{children:l})}),e.jsxs("form",{className:"product-update-form",onSubmit:u,children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Product Name:"}),e.jsx("input",{type:"text",name:"name",value:i.name,onChange:s})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Product Image:"}),e.jsx("div",{children:e.jsx("img",{src:i.image?i.image:Q,width:200,height:200,alt:"Product",style:{objectFit:"contain",border:"1px solid #ccc"},onError:n=>n.target.src=Q})}),e.jsx("input",{type:"file",accept:"image/*",name:"product",onChange:P})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Bio:"}),e.jsx("textarea",{name:"bio",value:i.bio,onChange:s})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Metric Unit:"}),e.jsx("input",{type:"text",name:"metricUnit",value:i.metricUnit,onChange:s})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Price:"}),e.jsx("input",{type:"number",name:"price",value:i.price,onChange:s,onWheel:n=>n.target.blur()})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Discount:"}),e.jsx("input",{type:"number",name:"discount",value:i.discount,onChange:s,onWheel:n=>n.target.blur()})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Quantity:"}),e.jsx("input",{type:"number",name:"quantity",value:i.quantity,onChange:s,onWheel:n=>n.target.blur()})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Packages:"}),i.packages.map((n,x)=>e.jsxs("div",{className:"package-group",children:[e.jsxs("div",{style:{display:"flex",flexDirection:"column"},children:[e.jsx("label",{children:"Count"}),e.jsx("input",{type:"number",value:n.count,onChange:o=>f(x,"count",Number(o.target.value)),placeholder:"Package Count",onWheel:o=>o.target.blur()})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column"},children:[e.jsx("label",{children:"Discount"}),e.jsx("input",{type:"number",value:n.discount,onChange:o=>f(x,"discount",Number(o.target.value)),placeholder:"Package Discount",onWheel:o=>o.target.blur()})]})]},x))]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Delivery Fee:"}),e.jsx("input",{type:"number",name:"deliveryFee",value:i.deliveryFee,onChange:s,onWheel:n=>n.target.blur()})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"KM Range Charges:"}),(N=i==null?void 0:i.kmRangeCharges)==null?void 0:N.map((n,x)=>{var o;return e.jsxs("div",{className:"package-group",children:[e.jsxs("div",{style:{display:"flex",flexDirection:"column"},children:[e.jsx("label",{children:"Range"}),e.jsx("select",{value:n.range,onChange:r=>y(x,"range",r.target.value),children:(o=a==null?void 0:a.ranges)==null?void 0:o.map((r,C)=>e.jsx("option",{value:r,children:r},C))})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column"},children:[e.jsx("label",{children:"Charges"}),e.jsx("input",{type:"number",value:n.charges,onChange:r=>y(x,"charges",Number(r.target.value)),placeholder:"Charges",onWheel:r=>r.target.blur()})]})]},x)})]}),e.jsx("button",{type:"submit",className:"product-update-button",children:"Update Product"})]}),b&&e.jsx(L,{}),d&&e.jsx("div",{className:"errDiv",children:e.jsx("p",{children:l})})]})},X=({productsData:c})=>{const g=T(),m=S(s=>s.approvals.productsData),[j,k]=h.useState(c),[a,v]=h.useState(null),[l,b]=h.useState(null),d=E();h.useEffect(()=>{k(m||c)},[m,c]);const i=s=>{window.confirm("Are you sure, you want to update listing for this product?")&&g(Z({productId:s}))},p=s=>{window.confirm("Are you sure, you want to block this product?")&&g(ee({productId:s}))};return e.jsxs(e.Fragment,{children:[e.jsxs("table",{className:"questionsTable",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Sr.No"}),e.jsx("th",{children:"Image"}),e.jsx("th",{children:"Name"}),e.jsx("th",{children:"Category"}),e.jsx("th",{children:"Price"}),e.jsx("th",{children:"Discount"}),e.jsx("th",{children:"Quantity"}),e.jsx("th",{children:"Delivery Fee"}),e.jsx("th",{children:"Stock"}),e.jsx("th",{children:"Packages"}),e.jsx("th",{children:"Created At"}),e.jsx("th",{children:"Actions"})]})}),e.jsx("tbody",{children:(j==null?void 0:j.length)>0?j.map((s,u)=>{var f,P;return e.jsxs("tr",{style:{opacity:s!=null&&s.isBlocked?.5:1},children:[e.jsx("td",{children:u+1}),e.jsxs("td",{style:{display:"flex",flexDirection:"column"},children:[e.jsx("span",{style:{color:"green",fontWeight:"bold",fontSize:"12px"},children:s!=null&&s.topListed?"Listed":""}),e.jsx("img",{src:s==null?void 0:s.image,alt:s==null?void 0:s.name,style:{width:"50px",height:"50px",objectFit:"cover",boxShadow:"rgba(0, 0, 0, 0.24) 0px 3px 8px"},onClick:()=>b(s==null?void 0:s.image)})]}),e.jsx("td",{children:s==null?void 0:s.name}),e.jsx("td",{children:((f=s==null?void 0:s.category)==null?void 0:f.name)||"N/A"}),e.jsxs("td",{children:["₹",s==null?void 0:s.price]}),e.jsxs("td",{children:["₹",s==null?void 0:s.discount]}),e.jsx("td",{children:s==null?void 0:s.quantity}),e.jsxs("td",{children:["₹",s==null?void 0:s.deliveryFee]}),e.jsx("td",{children:s==null?void 0:s.stock}),e.jsx("td",{children:(P=s==null?void 0:s.packages)==null?void 0:P.map((y,N)=>e.jsxs("div",{children:[y.count," units - ",y==null?void 0:y.discount," off"]},N))}),e.jsx("td",{children:new Date(s==null?void 0:s.createdAt).toLocaleString()||"N/A"}),e.jsxs("td",{children:[e.jsx("button",{className:"actionButton",style:{backgroundColor:s!=null&&s.topListed?"green":""},onClick:()=>i(s._id),children:e.jsx("span",{className:s!=null&&s.topListed?"bi bi-clipboard-check-fill":"bi bi-clipboard-check"})}),e.jsx("button",{className:"actionButton",onClick:()=>p(s._id),style:{marginTop:"2px",backgroundColor:s!=null&&s.isBlocked?"var(--danger)":"green"},children:e.jsx("span",{className:"bi bi-ban"})}),e.jsx("button",{className:"actionButton",onClick:()=>v(s),style:{marginTop:"2px"},children:e.jsx("span",{className:"bi bi-pencil"})}),e.jsx("button",{className:"actionButton",onClick:()=>d(`/dealerSupplieProducts?dealerId=${s.dealerId}&approvalStatus=true`),style:{marginTop:"2px"},children:e.jsx("span",{className:"bi bi-eye"})})]})]},u)}):e.jsx("tr",{children:e.jsx("td",{colSpan:"11",style:{textAlign:"center",padding:"10px"},children:"No products available"})})})]}),a&&e.jsx($,{isOpen:!0,onClose:()=>v(null),children:e.jsx(te,{product:a,onClose:()=>v(null),onUpdateSuccess:()=>v(null)})}),l&&e.jsx($,{isOpen:!0,onClose:()=>b(null),children:e.jsx("div",{style:{textAlign:"center"},children:e.jsx("img",{src:l,width:300,height:300,style:{objectFit:"contain"}})})})]})},G=({dealerId:c})=>{E();const g=T();q();const m=i=>new Date(i).toISOString(),[j,k]=h.useState(""),{error:a,isLoading:v,stats:l}=S(i=>i.approvals);h.useEffect(()=>{g(se({date:j,dealerId:c,userId:""}))},[g,j]);const b=i=>{const p=i.target.value,s=m(new Date(p));k(s)},d=()=>{k("")};return e.jsx(e.Fragment,{children:e.jsx("div",{style:{marginTop:"20px"},children:e.jsxs("div",{className:"statistics-container",children:[e.jsx("h2",{className:"statistics-title",children:"Dealers Statistics Overview"}),e.jsxs("div",{className:"date-picker",children:[e.jsx("label",{htmlFor:"date",children:"Select Date:"}),e.jsx("input",{type:"date",id:"date",value:j.split("T")[0],onChange:b,className:"date-input"}),j&&e.jsx("button",{onClick:d,className:"clear-btn",children:"Clear"})]}),e.jsxs("div",{className:"statistics-grid",children:[e.jsxs("div",{className:"statistics-card",children:[e.jsx("h3",{children:"Total Orders"}),e.jsx("p",{className:"statistics-value",children:(l==null?void 0:l.totalOrders)||0})]}),e.jsxs("div",{className:"statistics-card",children:[e.jsx("h3",{children:"Completed Orders"}),e.jsx("p",{className:"statistics-value",children:(l==null?void 0:l.completedOrders)||0})]})]}),e.jsxs("div",{className:"statistics-card orders-card",children:[e.jsx("h3",{children:"Orders Summary"}),e.jsxs("div",{className:"orders-details",children:[e.jsx("div",{className:"order-summary-box large-box",children:e.jsxs("p",{children:[e.jsx("span",{children:"Total Order Amount:"})," ₹",(l==null?void 0:l.totalOrderAmount)||0]})}),e.jsx("div",{className:"order-summary-box small-box",children:e.jsxs("p",{children:[e.jsx("span",{children:"On Request Orders:"})," ",(l==null?void 0:l.onRequestOrders)||0]})}),e.jsx("div",{className:"order-summary-box small-box",children:e.jsxs("p",{children:[e.jsx("span",{children:"Ongoing Orders:"})," ",(l==null?void 0:l.onGoingOrders)||0]})}),e.jsx("div",{className:"order-summary-box small-box",children:e.jsxs("p",{children:[e.jsx("span",{children:"Completed Orders:"})," ",(l==null?void 0:l.completedOrders)||0]})}),e.jsx("div",{className:"order-summary-box small-box",children:e.jsxs("p",{children:[e.jsx("span",{children:"Rejected Orders:"})," ",(l==null?void 0:l.rejectedOrders)||0]})})]})]})]})})})},be=({listed:c,topListed:g})=>{E();const m=T(),j=q(),k=new URLSearchParams(j.search),a=k.get("dealerId"),v=k.get("approvalStatus")==="true",l=h.useRef(""),b=h.useRef(""),[d,i]=h.useState(c?"products":"stats"),[p,s]=h.useState("onrequest"),[u,f]=h.useState(""),[P,y]=h.useState(10),[N,n]=h.useState(1),[x,o]=h.useState(null),r=()=>{const t=u?new Date(u).toISOString():"";m(ne({currentPage:N,limit:P,type:p,dealerId:a,search:l.current.value,date:t,userId:""}))},C=()=>{console.log("hello "+g),m(ie({currentPage:N,limit:P,dealerId:c||g?"":a,type:g?"listed":"all",search:b.current.value}))};h.useEffect(()=>{d=="orders"?r():d=="products"&&C()},[m,N,P,c,a,p,d,u,g]);const{dealerData:D,isLoading:re}=S(t=>t.approvals);h.useEffect(()=>{c||m(ae({dealerId:a})),c&&i("products")},[a,m,c]),h.useEffect(()=>{n(1)},[j.pathname,c]);const{error:O,isLoading:A,productsData:U,pageCount:I}=S(t=>t.approvals),{error:w,isLoading:V,data:B,pageCount:F}=S(t=>t.orders),W=t=>{s(t.target.value)};return e.jsxs(le,{children:[e.jsxs("div",{className:"listMain",children:[e.jsx("h2",{children:c?"Listed Products":"Dealer Supplied Products"}),(window.location.pathname.includes("allProducts")||window.location.pathname.includes("topListedProducts"))&&e.jsxs("div",{className:"searchTab",children:[e.jsxs("div",{children:[e.jsx("span",{children:"Limits "}),e.jsxs("select",{onChange:t=>{n(1),y(Number(t.target.value))},children:[e.jsx("option",{value:10,children:"10"}),e.jsx("option",{value:25,children:"25"}),e.jsx("option",{value:50,children:"50"}),e.jsx("option",{value:100,children:"100"})]}),e.jsx("span",{children:" Entries"})]}),e.jsx("div",{className:"search-tab-flex",children:e.jsxs("div",{children:[e.jsx("input",{type:"text",placeholder:"Search",ref:b,onKeyDown:t=>{t.key==="Enter"&&(C(),n(1))}}),e.jsx("button",{onClick:()=>{C(),n(1)},className:"bi bi-search"})]})})]}),A||V&&e.jsx(L,{}),!v&&!c?e.jsx(z,{dealerData:D,dealerId:a,defaultBuilding:K}):c?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"tabsButton",children:e.jsx("button",{className:d==="products"?"active-tab":"",onClick:()=>i("products"),children:"Products"})}),e.jsxs("div",{style:{overflowX:"scroll"},children:[d==="orders"?e.jsxs("div",{className:"searchTab",children:[e.jsxs("select",{onChange:W,style:{padding:"6px",marginTop:"15px"},children:[e.jsx("option",{value:"onrequest",children:"Request Order"}),e.jsx("option",{value:"ongoing",children:"Ongoing Order"}),e.jsx("option",{value:"rejected",children:"Rejected Order"}),e.jsx("option",{value:"completed",children:"Completed Order"})]}),e.jsxs("div",{className:"search-tab-flex",children:[e.jsxs("div",{children:[e.jsx("input",{type:"text",placeholder:"Search",ref:l,onKeyDown:t=>{t.key==="Enter"&&(r(),n(1))}}),e.jsx("button",{onClick:()=>{r(),n(1)},className:"bi bi-search"})]}),e.jsxs("div",{children:[e.jsx("span",{style:{paddingRight:"6px"},children:"Date:"}),e.jsx("input",{type:"datetime-local",value:u,onChange:t=>f(t.target.value),className:"datePicker"}),u&&e.jsx("button",{onClick:()=>f(""),className:"clear-btn",children:"Clear"})]})]})]}):null,d==="orders"?e.jsx(M,{data:B}):d==="stats"&&!c?e.jsx(G,{dealerId:a}):e.jsx(X,{productsData:U,setActiveTab:d})]}),w&&e.jsx("div",{className:"errDiv",children:e.jsx("p",{children:w})}),O&&e.jsx("div",{className:"errDiv",children:e.jsx("p",{children:O})})]}):e.jsxs(e.Fragment,{children:[e.jsx(z,{dealerData:D,dealerId:a,defaultBuilding:K}),e.jsxs("div",{className:"tabsButton",children:[e.jsx("button",{className:d==="stats"?"active-tab":"",onClick:()=>i("stats"),children:"Statistics"}),e.jsx("button",{className:d==="products"?"active-tab":"",onClick:()=>i("products"),children:"Products"}),e.jsx("button",{className:d==="orders"?"active-tab":"",onClick:()=>{i("orders"),s("onrequest")},children:"Orders"})]}),e.jsxs("div",{style:{overflowX:"scroll"},children:[d==="orders"?e.jsxs("div",{className:"searchTab",children:[e.jsxs("select",{onChange:W,style:{padding:"6px",marginTop:"15px"},children:[e.jsx("option",{value:"onrequest",children:"Request Order"}),e.jsx("option",{value:"ongoing",children:"Ongoing Order"}),e.jsx("option",{value:"rejected",children:"Rejected Order"}),e.jsx("option",{value:"completed",children:"Completed Order"})]}),e.jsxs("div",{className:"search-tab-flex",children:[e.jsxs("div",{children:[e.jsx("input",{type:"text",placeholder:"Search",ref:l,onKeyDown:t=>{t.key==="Enter"&&(r(),n(1))}}),e.jsx("button",{onClick:()=>{r(),n(1)},className:"bi bi-search"})]}),e.jsxs("div",{children:[e.jsx("span",{style:{paddingRight:"6px"},children:"Date:"}),e.jsx("input",{type:"datetime-local",value:u,onChange:t=>f(t.target.value),className:"datePicker"}),u&&e.jsx("button",{onClick:()=>f(""),className:"clear-btn",children:"Clear"})]})]})]}):null,d==="products"?e.jsxs("div",{className:"searchTab",children:[e.jsxs("div",{children:[e.jsx("span",{children:"Limits "}),e.jsxs("select",{onChange:t=>{n(1),y(Number(t.target.value))},children:[e.jsx("option",{value:10,children:"10"}),e.jsx("option",{value:25,children:"25"}),e.jsx("option",{value:50,children:"50"}),e.jsx("option",{value:100,children:"100"})]}),e.jsx("span",{children:" Entries"})]}),e.jsx("div",{className:"search-tab-flex",children:e.jsxs("div",{children:[e.jsx("input",{type:"text",placeholder:"Search",ref:b,onKeyDown:t=>{t.key==="Enter"&&(C(),n(1))}}),e.jsx("button",{onClick:()=>{C(),n(1)},className:"bi bi-search"})]})})]}):null,d==="orders"?e.jsx(M,{data:B}):d==="stats"?e.jsx(G,{dealerId:a}):e.jsx(X,{productsData:U,setActiveTab:d})]}),w&&e.jsx("div",{className:"errDiv",children:e.jsx("p",{children:w})}),O&&e.jsx("div",{className:"errDiv",children:e.jsx("p",{children:O})}),A&&e.jsx(L,{})]})]}),d=="products"?e.jsx(_,{breakLabel:"...",forcePage:N-1,activePage:3,className:`pagination margin-16 ${I<=1?"disabled":""}`,nextLabel:"Next",activeClassName:"active",nextClassName:"active",previousLinkClassName:"unactive",breakClassName:"unactive",onPageChange:I>1?t=>{const R=t.selected+1;n(R)}:null,pageRangeDisplayed:3,pageCount:I||0,previousLabel:"Previous",disabledClassName:"disabled"}):d=="orders"?e.jsx(_,{breakLabel:"...",forcePage:N-1,activePage:3,className:`pagination margin-16 ${F<=1?"disabled":""}`,nextLabel:"Next",activeClassName:"active",nextClassName:"active",previousLinkClassName:"unactive",breakClassName:"unactive",onPageChange:F>1?t=>{const R=t.selected+1;n(R)}:null,pageRangeDisplayed:3,pageCount:F||0,previousLabel:"Previous",disabledClassName:"disabled"}):""]})};export{be as default};
