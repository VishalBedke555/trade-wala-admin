import{u as N,a as k,r as a,c as w,j as s,L as E,B as o,l as P}from"./index-GDIqWgRK.js";import{l as b,p as I}from"./package-BBZZd5X7.js";const C=()=>{const i=N(),g=k(),[t,x]=a.useState(""),[n,p]=a.useState(""),[c,r]=a.useState(""),[l,v]=a.useState(!1),d=a.useRef(null);a.useEffect(()=>{(async()=>{localStorage.getItem("token")&&i("/")})()},[i]);const{error:h,isLoading:j,isLoggedIn:u}=w(e=>e.auth),f=()=>{!t.trim()||!n.trim()?(o.error("Please fill in all fields"),r("Invalid Email or Password")):t.match(/^[^\s@]+@[^\s@]+\.[^\s@]+$/)?n.length<6?(o.error("Password must be at least 6 characters long"),r("Invalid Password")):g(P({email:t,password:n})):(o.error("Invalid email address"),r("Invalid Email"))};a.useEffect(()=>{const e=m=>{m.keyCode===13&&d.current.click()};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}},[]),a.useEffect(()=>{u&&i("/")},[u]);const y=()=>{v(!l)};return s.jsx("div",{className:"loginMain",children:s.jsxs("div",{className:"loginOuter",children:[s.jsxs("div",{className:"loginInner",children:[s.jsxs("div",{className:"logo",children:[s.jsx("img",{src:b,loading:"lazy",width:"100",height:"100",style:{objectFit:"cover",borderRadius:"50%"}}),s.jsxs("span",{className:"version",style:{position:"absolute",right:"0px"},children:["v ",I.version]})]}),s.jsxs("dl",{children:[s.jsxs("dt",{children:["Email ",s.jsx("span",{className:"req",children:"*"})]}),s.jsx("dd",{children:s.jsx("input",{type:"text",value:t,onChange:e=>x(e.target.value),placeholder:"Enter Email"})}),s.jsxs("dt",{children:["Password ",s.jsx("span",{className:"req",children:"*"})]}),s.jsxs("dd",{children:[s.jsx("input",{type:l?"text":"password",value:n,onChange:e=>p(e.target.value),placeholder:"Enter Password"}),s.jsx("span",{className:"eyeIcon",style:{cursor:"pointer"},onClick:y,children:l?s.jsx("span",{className:"bi bi-eye"}):s.jsx("span",{className:"bi bi-eye-slash"})})]}),c&&s.jsx("dd",{className:"errDiv",style:{padding:"8px"},children:c}),s.jsx("button",{style:{cursor:"pointer"},ref:d,onClick:()=>f(),children:"LOGIN"})]}),j&&s.jsx(E,{}),h&&s.jsx("div",{className:"errDiv",children:s.jsx("p",{children:h})})]}),s.jsx("div",{className:"loginImg"})]})})};export{C as default};
