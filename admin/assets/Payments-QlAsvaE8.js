import{a as N,b as P,r as l,c as D,V as y,j as e,L,d as x,W as w}from"./index-GDIqWgRK.js";import{D as m}from"./Drawer-BQdu0KjK.js";import{R as A}from"./react-paginate-DdB8dUHD.js";/* empty css               *//* empty css                 */import{d as S}from"./gallery_default-Dw_oZD7n.js";import{M as k}from"./Modal-BVs0t9z7.js";import"./package-BBZZd5X7.js";const O=({status:a})=>{const c=N(),d=P(),[i,f]=l.useState(10),[t,o]=l.useState(1),[j,u]=l.useState(null),b=new URLSearchParams(d.search).get("orderId"),{error:p,isLoading:C,data:r,pageCount:h}=D(s=>s.payments);l.useEffect(()=>{c(y({currentPage:t,limit:i,status:a,orderId:b||""}))},[c,t,i,a,d.pathname]),l.useEffect(()=>{o(1),(r==null?void 0:r.length)===0&&o(1)},[d.pathname]);const g=async(s,n)=>{if(!(!s||!n))try{window.confirm(`Are you sure, you want to ${n=="success"?"settle":"reject"} payment`)&&(await c(w({paymentId:s,status:n})).unwrap(),c(y({currentPage:t,limit:i,status:a})))}catch(v){console.error("Error settling payment:",v)}};return e.jsxs(m,{children:[e.jsxs("div",{className:"listMain",children:[e.jsxs("h2",{children:[a==""?"All":a.charAt(0).toUpperCase()+a.slice(1)," Transactions"]}),e.jsx("div",{className:"searchTab",children:e.jsxs("div",{children:[e.jsx("span",{children:"Limits "}),e.jsxs("select",{onChange:s=>{o(1),f(Number(s.target.value))},children:[e.jsx("option",{value:10,children:"10"}),e.jsx("option",{value:25,children:"25"}),e.jsx("option",{value:50,children:"50"}),e.jsx("option",{value:100,children:"100"})]}),e.jsx("span",{children:" Entries"})]})}),C&&e.jsx(L,{}),r&&e.jsxs("div",{style:{overflowX:"scroll"},children:[e.jsxs("table",{className:"questionsTable",frame:"void",rules:"none",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Sr.No."}),e.jsx("th",{children:"Image"}),e.jsx("th",{children:"Payment Name"}),e.jsx("th",{children:"Details"}),e.jsx("th",{children:"Status"}),e.jsx("th",{children:"Amount"}),e.jsx("th",{children:"Created At"}),e.jsx("th",{children:"Action"})]})}),e.jsx("tbody",{children:(r==null?void 0:r.length)===0?e.jsx("tr",{children:e.jsx("td",{colSpan:8,style:{textAlign:"center"},children:"No Records Found..."})}):r==null?void 0:r.map((s,n)=>e.jsxs("tr",{children:[e.jsx("td",{children:n+1}),e.jsxs("td",{children:[e.jsx("span",{style:{color:"green",fontWeight:"bold",fontSize:"12px"},children:s!=null&&s.topListed?"Listed":""}),e.jsx("br",{}),e.jsx("img",{src:(s==null?void 0:s.image)||S,alt:s==null?void 0:s.name,style:{width:"50px",height:"50px",objectFit:"cover",boxShadow:"rgba(0, 0, 0, 0.24) 0px 3px 8px"},onClick:()=>u(s==null?void 0:s.image)})]}),e.jsx("td",{children:(s==null?void 0:s.paymentName)||"N/A"}),e.jsx("td",{children:e.jsxs("div",{style:{gap:"6px",display:"flex",flexDirection:"column"},children:[e.jsx(x,{to:`/orderDetails?orderId=${s==null?void 0:s.orderId}`,children:"Order Details"}),e.jsx(x,{to:`/dealerSupplieProducts?dealerId=${s==null?void 0:s.dealerId}`,children:"Dealer Details"}),e.jsx(x,{to:`/userDetails?userId=${s==null?void 0:s.userId}`,children:"User Details"})]})}),e.jsx("td",{children:(s==null?void 0:s.status)||"N/A"}),e.jsx("td",{children:(s==null?void 0:s.amount)||0}),e.jsxs("td",{children:[new Date(s==null?void 0:s.createdAt).toLocaleString()||"N/A"," ",e.jsx("br",{})," ",e.jsx("br",{})]}),e.jsx("td",{children:e.jsx("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center"},children:s.status==="pending"?e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>g(s._id,"success"),className:"paymentButton",style:{backgroundColor:"var(--success)"},children:"Settle Payment"}),e.jsx("button",{onClick:()=>g(s._id,"reject"),className:"paymentButton",style:{backgroundColor:"var(--danger)"},children:"Reject Payment"})]}):e.jsx("span",{style:{color:s.status==="success"?"var(--success)":"var(--danger)"},children:s.status})})})]},n))})]}),j&&e.jsx(k,{isOpen:!0,onClose:()=>u(null),children:e.jsx("div",{style:{textAlign:"center"},children:e.jsx("img",{src:j,width:300,height:600,style:{objectFit:"contain"}})})})]}),p&&e.jsx("div",{className:"errDiv",children:e.jsx("p",{children:p})})]}),e.jsx(A,{breakLabel:"...",forcePage:t-1,activePage:3,className:`pagination margin-16 ${h<=1?"disabled":""}`,nextLabel:"Next",activeClassName:"active",nextClassName:"active",previousLinkClassName:"unactive",breakClassName:"unactive",onPageChange:h>1?s=>{const n=s.selected+1;o(n)}:null,pageRangeDisplayed:3,pageCount:h||0,previousLabel:"Previous",disabledClassName:"disabled"})]})};export{O as default};
