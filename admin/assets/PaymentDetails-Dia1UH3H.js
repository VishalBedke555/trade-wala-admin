import{a as y,r as i,c as x,Z as k,j as e,L as j,B as P,_ as f,w as U}from"./index-GDIqWgRK.js";import{D as S}from"./Drawer-BQdu0KjK.js";/* empty css                 */import{M as w}from"./Modal-BVs0t9z7.js";import"./package-BBZZd5X7.js";const T=()=>{const o=y(),[u,c]=i.useState(!1),{paymentDetails:a,isLoading:C,error:p}=x(s=>s.payments),{isLoading:g}=x(s=>s.file),[n,h]=i.useState({accountNo:"",bankName:"",ifscCode:"",holderName:"",percentage:"",qrCodeUrl:""});i.useEffect(()=>{o(k())},[o]),i.useEffect(()=>{a&&h(a)},[a]);const N=()=>{c(!0)},t=s=>{const{name:r,value:l}=s.target;h(d=>({...d,[r]:l}))},b=async s=>{const r=s.target.files[0];if(r){const l=new FormData;l.append("file",r),l.append("type","qrcode");try{const m=(await o(U(l))).payload;m&&h(q=>({...q,qrCodeUrl:m}))}catch(d){console.error("File upload failed:",d)}}},v=async s=>{if(s.preventDefault(),n.percentage>=100){P.error("Percentage must be less than 100");return}const r=await o(f(n));f.fulfilled.match(r)&&c(!1)};return e.jsxs(S,{children:[e.jsxs("div",{className:"listMain",children:[e.jsxs("div",{className:"searchTab",children:[e.jsx("h2",{className:"page-title",children:"Payment Details"}),e.jsx("div",{children:e.jsx("button",{onClick:N,children:"Update Payment Details"})})]}),C?e.jsx(j,{}):e.jsxs("div",{className:"payment-card",children:[e.jsxs("div",{className:"payment-info",children:[e.jsxs("p",{children:[e.jsx("span",{children:"Account No:"})," ",a==null?void 0:a.accountNo]}),e.jsxs("p",{children:[e.jsx("span",{children:"Bank Name:"})," ",a==null?void 0:a.bankName]}),e.jsxs("p",{children:[e.jsx("span",{children:"IFSC Code:"})," ",a==null?void 0:a.ifscCode]}),e.jsxs("p",{children:[e.jsx("span",{children:"Account Holder:"})," ",a==null?void 0:a.holderName]}),e.jsxs("p",{children:[e.jsx("span",{children:"Charge %:"})," ",a==null?void 0:a.percentage,"%"]})]}),e.jsxs("div",{className:"qr-section",children:[e.jsx("p",{children:e.jsx("strong",{children:"QR Code:"})}),e.jsx("img",{src:a==null?void 0:a.qrCodeUrl,alt:"QR Code",className:"qr-image"})]})]}),u&&e.jsx(w,{isOpen:u,onClose:()=>c(!1),children:e.jsxs("div",{children:[e.jsx("h3",{children:"Update Payment Details"}),e.jsxs("form",{onSubmit:v,className:"form-container",children:[e.jsx("label",{children:"Account Number: "}),e.jsx("input",{type:"text",name:"accountNo",value:n.accountNo,onChange:t,placeholder:"Account Number",required:!0}),e.jsx("label",{children:"Bank Name:"}),e.jsx("input",{type:"text",name:"bankName",value:n.bankName,onChange:t,placeholder:"Bank Name",required:!0}),e.jsx("label",{children:"IFSC Code:"}),e.jsx("input",{type:"text",name:"ifscCode",value:n.ifscCode,onChange:t,placeholder:"IFSC Code",required:!0}),e.jsx("label",{children:"Account Holder Name:"}),e.jsx("input",{type:"text",name:"holderName",value:n.holderName,onChange:t,placeholder:"Account Holder Name",required:!0}),e.jsx("label",{children:"Platform Charge (%):"}),e.jsx("input",{type:"number",name:"percentage",onWheel:s=>s.target.blur(),value:n.percentage,onChange:t,placeholder:"Platform Charge %",max:"99.99",step:"0.01",required:!0}),e.jsx("label",{className:"qr-upload-label",children:"Upload QR Code Image:"}),e.jsx("input",{type:"file",accept:"image/*",onChange:b}),n.qrCodeUrl&&e.jsx("div",{style:{marginTop:"12px"},children:e.jsx("img",{src:n.qrCodeUrl,alt:"Uploaded QR Code",style:{width:"120px",height:"120px",objectFit:"contain"}})}),e.jsxs("div",{className:"form-buttons",children:[e.jsx("button",{type:"button",onClick:()=>c(!1),children:"Cancel"}),e.jsx("button",{type:"submit",className:"save-button",children:"Save"})]})]}),g&&e.jsx(j,{})]})})]}),p&&e.jsx("div",{className:"errDiv",children:e.jsx("p",{children:p})})]})};export{T as default};
