import{a as y,r as i,j as e,D as w,E as L,w as S,u as A,b as P,c as T,L as E,d as F,F as I,G as R,H as U}from"./index-GDIqWgRK.js";import{R as _}from"./react-paginate-DdB8dUHD.js";/* empty css               */import{D as q}from"./Drawer-BQdu0KjK.js";import{d as B}from"./gallery_default-Dw_oZD7n.js";import{M as v}from"./Modal-BVs0t9z7.js";/* empty css                 */import"./package-BBZZd5X7.js";const M=({categoryData:n,onClose:g})=>{const h=y(),[l,p]=i.useState({image:"",name:""});i.useEffect(()=>{n&&p({image:n.image||"",name:n.name||""})},[n]);const x=r=>{const{name:d,value:o}=r.target;p(t=>({...t,[d]:o}))},c=async r=>{const d=r.target.files[0];if(!d)return;const o=new FormData;o.append("type","category"),o.append("file",d);const t=await h(S(o));t.meta.requestStatus==="fulfilled"&&t.payload&&p(f=>({...f,image:t.payload}))},j=async r=>{r.preventDefault(),l.image!==""&&l.name!==""?(n!=null&&n._id?await h(w({categoryId:n._id,...l})):await h(L(l)),g()):alert("All fields are required!")};return e.jsxs("div",{className:"update-category-container",children:[e.jsx("h2",{children:n!=null&&n._id?"Update Category":"Add Category"}),e.jsxs("form",{onSubmit:j,children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Category Name:"}),e.jsx("input",{type:"text",name:"name",value:l.name,onChange:x,required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Category Image:"}),l.image&&e.jsx("div",{className:"image-preview",children:e.jsx("img",{src:l.image,alt:"Category"})}),e.jsx("input",{type:"file",accept:"image/*",onChange:c})]}),e.jsx("button",{className:"button-add",type:"submit",children:n!=null&&n._id?"Update":"Add"})]})]})},J=()=>{var C,m;A();const n=y(),g=P(),h=i.useRef(""),[l,p]=i.useState(10),[x,c]=i.useState(1),[j,r]=i.useState(null),[d,o]=i.useState(null),t=()=>{n(I({currentPage:x,limit:l,search:h.current.value}))};i.useEffect(()=>{t()},[n,x,l]),i.useEffect(()=>{c(1)},[g.pathname]);const f=s=>{window.confirm("Are you sure you want to delete this Category?")&&n(U({categoryType:"category",docId:s}))},N=s=>{window.confirm("Are you sure you want to update this Category?")&&n(R({categoryId:s}))},{error:b,isLoading:k,data:a}=T(s=>s.category);return e.jsxs(q,{children:[e.jsxs("div",{className:"listMain",children:[e.jsx("h2",{children:"Categories"}),e.jsxs("div",{className:"searchTab",children:[e.jsxs("div",{children:[e.jsx("span",{children:"Limits "}),e.jsxs("select",{onChange:s=>{c(1),p(Number(s.target.value))},children:[e.jsx("option",{value:10,children:"10"}),e.jsx("option",{value:25,children:"25"}),e.jsx("option",{value:50,children:"50"}),e.jsx("option",{value:100,children:"100"})]}),e.jsx("span",{children:" Entries"})]}),e.jsxs("div",{className:"search-tab-flex",children:[e.jsx("button",{onClick:()=>r(!0),children:"Add Category"}),e.jsx("input",{type:"text",ref:h,placeholder:"Search",onKeyDown:s=>{s.key==="Enter"&&(t(),c(1))}}),e.jsx("button",{onClick:()=>{t(),c(1)},className:"bi bi-search"})]})]}),k&&e.jsx(E,{}),a&&e.jsxs("div",{style:{overflowX:"scroll"},children:[e.jsxs("table",{className:"questionsTable",frame:"void",rules:"none",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Sr.No."}),e.jsx("th",{children:"Image"}),e.jsx("th",{children:"Name"}),e.jsx("th",{children:"Count"}),e.jsx("th",{children:"Created At"}),e.jsx("th",{children:"Action"})]})}),e.jsx("tbody",{children:((C=a==null?void 0:a.categories)==null?void 0:C.length)===0?e.jsx("tr",{children:e.jsx("td",{colSpan:6,style:{textAlign:"center"},children:"No Records Found..."})}):(m=a==null?void 0:a.categories)==null?void 0:m.map((s,u)=>e.jsxs("tr",{children:[e.jsx("td",{children:u+1}),e.jsxs("td",{children:[e.jsx("span",{style:{color:"green",fontWeight:"bold",fontSize:"12px"},children:s!=null&&s.topListed?"Listed":""}),e.jsx("br",{}),e.jsx("img",{src:(s==null?void 0:s.image)||B,alt:s==null?void 0:s.name,style:{width:"50px",height:"50px",objectFit:"cover",boxShadow:"rgba(0, 0, 0, 0.24) 0px 3px 8px"},onClick:()=>o(s==null?void 0:s.image)})]}),e.jsx("td",{children:e.jsx(F,{to:`/subCategory?categoryId=${s==null?void 0:s._id}`,children:(s==null?void 0:s.name)||"N/A"})}),e.jsx("td",{children:(s==null?void 0:s.count)||0}),e.jsxs("td",{children:[new Date(s==null?void 0:s.createdAt).toLocaleString()||"N/A"," ",e.jsx("br",{})," ",e.jsx("br",{})]}),e.jsxs("td",{children:[e.jsx("button",{className:"actionButton",style:{backgroundColor:s!=null&&s.topListed?"green":""},onClick:()=>N(s._id),children:e.jsx("span",{className:s!=null&&s.topListed?"bi bi-clipboard-check-fill":"bi bi-clipboard-check"})}),e.jsx("button",{className:"actionButton",onClick:()=>r(s),children:e.jsx("span",{className:"bi bi-pencil"})}),e.jsx("button",{className:"actionButton",style:{backgroundColor:"var(--danger)"},onClick:()=>f(s._id),children:e.jsx("span",{className:"bi bi-trash"})})]})]},u))})]}),j&&e.jsx(v,{isOpen:!0,onClose:()=>r(null),children:e.jsx(M,{categoryData:j,onClose:()=>r(null),onUpdateSuccess:()=>r(null)})}),d&&e.jsx(v,{isOpen:!0,onClose:()=>o(null),children:e.jsx("div",{style:{textAlign:"center"},children:e.jsx("img",{src:d,width:300,height:300,style:{objectFit:"contain"}})})})]}),b&&e.jsx("div",{className:"errDiv",children:e.jsx("p",{children:b})})]}),e.jsx(_,{breakLabel:"...",forcePage:x-1,activePage:3,className:`pagination margin-16 ${(a==null?void 0:a.page)<=1?"disabled":""}`,nextLabel:"Next",activeClassName:"active",nextClassName:"active",previousLinkClassName:"unactive",breakClassName:"unactive",onPageChange:(a==null?void 0:a.page)>1?s=>{const u=s.selected+1;c(u)}:null,pageRangeDisplayed:3,pageCount:(a==null?void 0:a.page)||0,previousLabel:"Previous",disabledClassName:"disabled"})]})};export{J as default};
